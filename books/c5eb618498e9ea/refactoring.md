---
title: "リファクタリング"
---

## リファクタリングをする時の考え方

[^1]

- pull requestはリファクタリングのためのものと，振る舞いの変更でわける。
- 読みやすい順番を意識してソースを並び替えてみる
- ヘルパー関数として抽出する
  - 変更する場所をヘルパーとして抽出してみる
    - いったんコードを一箇所に集めてから分割してみる。
- リファクタリングによって不要になったコメントは削除する
- 不可逆的な変更を心がける
- リファクタリングに対してコスト意識を持つ

- いつ整頓するのが良いか?
  - 改めて整頓
    - お楽しみリストを作って修正する場所をリストアップして空き時間で取り組む
  - あとで整頓する
    - 一旦，振る舞いを変更してみて，整頓の価値を見極める
  - 先に整頓するなら以下を考慮する
    - 今直して変更が楽にならないならお楽しみリストへ
    - 変更のためにコードを読んでいる最中なら今直す
    - 直すことで長期的な利益があるか?
    - 1時間以内に直せるかを目安にしてみる
    - 明日の1ドルより今日の1ドル: 先に整頓して振る舞いの変更をするコスト < 整頓せずに振る舞いを変更するコストのときだけ先に整頓する

トークン→式→ステートメント→関数→オブジェクト/モジュール→システム

---

## References

- [^1]: [Tidy First?](https://www.oreilly.co.jp/books/9784814400911/)
